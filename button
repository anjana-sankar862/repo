class ButtonEditor extends DefaultCellEditor {
    private JButton button;
    private PatientTableView tableView;

    public ButtonEditor(JCheckBox checkBox, PatientTableView tableView) {
        super(checkBox);
        this.tableView = tableView;
        button = new JButton("Update");
        button.addActionListener(e -> {
            int row = tableView.table.getSelectedRow();
            if (row != -1) {
                int mrdID = (int) tableView.table.getValueAt(row, 0);
                Patient patientToUpdate = tableView.allPatients.stream()
                        .filter(p -> p.getMrdID() == mrdID).findFirst().orElse(null);
                if (patientToUpdate != null) {
                    new PatientUpdateView(patientToUpdate, tableView);
                }
            }
        });
    }

    public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected,
                                                 int row, int column) {
        return button;
    }
}
class ButtonRenderer extends JButton implements TableCellRenderer {
    public ButtonRenderer() {
        setText("Update");
    }

    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected,
                                                   boolean hasFocus, int row, int column) {
        return this;
    }
}
public class PatientUpdateView extends JFrame {
    private JTextField firstNameField, lastNameField, emailField, contactField, addressField, pincodeField;
    private JComboBox<String> sexCombo, maritalStatusCombo, bloodGroupCombo, stateComboBox;
    private JDateChooser dobChooser;
    private JButton updateButton;
    private Patient patient;
    private PatientTableView tableView;

    public PatientUpdateView(Patient patient, PatientTableView tableView) {
        this.patient = patient;
        this.tableView = tableView;

        setTitle("Update Patient Details");
        setSize(600, 500);
        setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        setLayout(new GridBagLayout());

        GridBagConstraints gbc = new GridBagConstraints();
        gbc.insets = new Insets(5, 5, 5, 5);
        gbc.anchor = GridBagConstraints.WEST;

        // Initialize components
        firstNameField = new JTextField(patient.getFirstName(), 15);
        lastNameField = new JTextField(patient.getLastName(), 15);
        dobChooser = new JDateChooser();
        dobChooser.setDate(Date.from(patient.getDob().atStartOfDay(ZoneId.systemDefault()).toInstant()));

        emailField = new JTextField(patient.getEmail(), 15);
        contactField = new JTextField(String.valueOf(patient.getPhoneNumber()), 15);
        addressField = new JTextField(patient.getAddress(), 15);
        pincodeField = new JTextField(patient.getPincode(), 15);

        sexCombo = new JComboBox<>(new String[]{"Male", "Female", "Other"});
        sexCombo.setSelectedItem(patient.getSex());

        maritalStatusCombo = new JComboBox<>(new String[]{"Single", "Married", "Divorced", "Widowed"});
        maritalStatusCombo.setSelectedItem(patient.getMaritalStatus());

        bloodGroupCombo = new JComboBox<>(new String[]{"A+", "A-", "B+", "B-", "AB+", "AB-", "O+", "O-"});
        bloodGroupCombo.setSelectedItem(patient.getBloodGroup());

        stateComboBox = new JComboBox<>(new String[]{"Andhra Pradesh", "Arunachal Pradesh", /* other states */});
        stateComboBox.setSelectedItem(patient.getState());

        updateButton = new JButton("Update");

        // Layout
        gbc.gridx = 0;
        gbc.gridy = 0;
        add(new JLabel("First Name:"), gbc);
        gbc.gridx = 1;
        add(firstNameField, gbc);

        gbc.gridx = 0;
        gbc.gridy = 1;
        add(new JLabel("Last Name:"), gbc);
        gbc.gridx = 1;
        add(lastNameField, gbc);

        gbc.gridx = 0;
        gbc.gridy = 2;
        add(new JLabel("DOB:"), gbc);
        gbc.gridx = 1;
        add(dobChooser, gbc);

        gbc.gridx = 0;
        gbc.gridy = 3;
        add(new JLabel("Email:"), gbc);
        gbc.gridx = 1;
        add(emailField, gbc);

        gbc.gridx = 0;
        gbc.gridy = 4;
        add(new JLabel("Contact:"), gbc);
        gbc.gridx = 1;
        add(contactField, gbc);

        gbc.gridx = 0;
        gbc.gridy = 5;
        add(new JLabel("Address:"), gbc);
        gbc.gridx = 1;
        add(addressField, gbc);

        gbc.gridx = 0;
        gbc.gridy = 6;
        add(new JLabel("Pincode:"), gbc);
        gbc.gridx = 1;
        add(pincodeField, gbc);

        gbc.gridx = 0;
        gbc.gridy = 7;
        add(new JLabel("State:"), gbc);
        gbc.gridx = 1;
        add(stateComboBox, gbc);

        gbc.gridx = 0;
        gbc.gridy = 8;
        add(new JLabel("Sex:"), gbc);
        gbc.gridx = 1;
        add(sexCombo, gbc);

        gbc.gridx = 0;
        gbc.gridy = 9;
        add(new JLabel("Marital Status:"), gbc);
        gbc.gridx = 1;
        add(maritalStatusCombo, gbc);

        gbc.gridx = 0;
        gbc.gridy = 10;
        add(new JLabel("Blood Group:"), gbc);
        gbc.gridx = 1;
        add(bloodGroupCombo, gbc);

        gbc.gridx = 1;
        gbc.gridy = 11;
        add(updateButton, gbc);

        // Update Button Action
        updateButton.addActionListener(e -> {
            try {
                patient.setFirstName(firstNameField.getText());
                patient.setLastName(lastNameField.getText());
                patient.setDob(dobChooser.getDate().toInstant().atZone(ZoneId.systemDefault()).toLocalDate());
                patient.setEmail(emailField.getText());
                patient.setPhoneNumber(Long.parseLong(contactField.getText()));
                patient.setAddress(addressField.getText());
                patient.setPincode(pincodeField.getText());
                patient.setState((String) stateComboBox.getSelectedItem());
                patient.setSex((String) sexCombo.getSelectedItem());
                patient.setMaritalStatus((String) maritalStatusCombo.getSelectedItem());
                patient.setBloodGroup((String) bloodGroupCombo.getSelectedItem());

                // Update in JSON and refresh table
                JsonHandler jsonHandler = new JsonHandler();
                jsonHandler.updatePatient(patient);
                tableView.updateTable(jsonHandler.readPatients());

                JOptionPane.showMessageDialog(this, "Patient details updated successfully!");
                dispose();
            } catch (Exception ex) {
                JOptionPane.showMessageDialog(this, "Error: " + ex.getMessage());
            }
        });

        setVisible(true);
    }
}


import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class WelcomePage {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(() -> {
            JFrame frame = new JFrame("Hospital Information System");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setSize(800, 600);
            frame.setLocationRelativeTo(null); // Center the window

            // Create a panel for the welcome screen content
            JPanel panel = new JPanel();
            panel.setLayout(new BorderLayout());

            // Create and add a hospital-related image
            JLabel imageLabel = new JLabel(new ImageIcon("hospital_image.jpg")); // Use your hospital image here
            panel.add(imageLabel, BorderLayout.CENTER);

            // Create a menu bar
            JMenuBar menuBar = new JMenuBar();

            // Create the "Registration" menu
            JMenu registrationMenu = new JMenu("Registration");

            JMenuItem patientRegistration = new JMenuItem("Patient Registration");
            patientRegistration.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    JOptionPane.showMessageDialog(frame, "Patient Registration clicked.");
                    // Here you can add the actual registration functionality
                }
            });
            registrationMenu.add(patientRegistration);

            JMenuItem doctorRegistration = new JMenuItem("Doctor Registration");
            doctorRegistration.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    JOptionPane.showMessageDialog(frame, "Doctor Registration clicked.");
                    // Here you can add the actual registration functionality
                }
            });
            registrationMenu.add(doctorRegistration);

            // Create the "Appointments" menu
            JMenu appointmentsMenu = new JMenu("Appointments");

            JMenuItem createAppointment = new JMenuItem("Create Appointment");
            createAppointment.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    JOptionPane.showMessageDialog(frame, "Create Appointment clicked.");
                    // Add create appointment functionality here
                }
            });
            appointmentsMenu.add(createAppointment);

            JMenuItem rescheduleAppointment = new JMenuItem("Reschedule Appointment");
            rescheduleAppointment.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    JOptionPane.showMessageDialog(frame, "Reschedule Appointment clicked.");
                    // Add reschedule appointment functionality here
                }
            });
            appointmentsMenu.add(rescheduleAppointment);

            // Create the "Browser" menu
            JMenu browserMenu = new JMenu("Browser");

            JMenuItem searchPatient = new JMenuItem("Search Patient");
            searchPatient.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    JOptionPane.showMessageDialog(frame, "Search Patient clicked.");
                    // Add search patient functionality here
                }
            });
            browserMenu.add(searchPatient);

            JMenuItem searchDoctor = new JMenuItem("Search Doctor");
            searchDoctor.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    JOptionPane.showMessageDialog(frame, "Search Doctor clicked.");
                    // Add search doctor functionality here
                }
            });
            browserMenu.add(searchDoctor);

            // Add the menus to the menu bar
            menuBar.add(registrationMenu);
            menuBar.add(appointmentsMenu);
            menuBar.add(browserMenu);

            // Set the menu bar for the frame
            frame.setJMenuBar(menuBar);

            // Add the main panel to the frame
            frame.add(panel);

            // Make the frame visible
            frame.setVisible(true);
        });
    }
}
